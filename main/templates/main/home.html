{% extends 'main/base.html' %}
{% load static widget_tweaks %}

{% block title %}Home - FoodOrder{% endblock %}

{% block content %}

<!-- HOME SECTION -->
<section id="home-section" class="pt-5 pb-5">
  <div class="d-flex mt-2 mx-4">
    <div class="container-fluid my-auto">
      <div class="row">
        <div class="col-lg-6 my-auto ps-5">
          <h1 class="display-4 fw-normal">Your Favorite Meals,</h1>
          <p class="display-4 fw-normal"><span style="font-weight: bold">Just </span> a Click Away</p>
          <p class="fw-light">Order easily, enjoy endlessly — fresh, delicious food delivered straight to your home.</p>
          <a href="{% url 'item_list' %}" class="btn btn-outline-dark rounded-pill mx-2 px-4 py-3" id="btn1">Order Now</a>
          <a href="#about-section" class="btn btn-outline-dark rounded-pill px-4 py-3" id="btn">Learn More</a>
        </div>
        <div class="col-lg-6">
          <div class="col-lg-9">
            <div class="card-body">
              <img src="{% static 'main/images/Front.png' %}" alt="" class="img-fluid">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ABOUT SECTION -->
   <section id="about-section" class="about-section py-5 bg-light">
  <div class="container">
    <div class="row align-items-center g-5">
      <div class="col-md-6">
        <div class="about-image">
          <img src="{% static 'main/images/abtt.jpeg' %}" alt="Delicious food served at FoodExpress" class="img-fluid rounded">
        </div>
      </div>
      <div class="col-md-6">
        <p class="text-uppercase text-muted mb-2">— About Us</p>
        <h2 class="fw-bold display-5">Inspired by Taste,<br>Built on <span class="highlight">Quality</span></h2>
        <p class="text-muted my-4">
          Passionate about quality, we create delicious <br> meals with fresh ingredients and care.
        </p>
        <ul class="list-unstyled">
          <li class="mb-3">
            <i class="fa fa-check-circle" style="color:#f15a24"></i> Fresh Food, Fast Delivery
          </li>
          <li class="mb-3">
            <i class="fa fa-check-circle" style="color:#f15a24"></i> Taste the Freshness in Every Bite
          </li>
          <li class="mb-3">
            <i class="fa fa-check-circle" style="color:#f15a24"></i> 10% off every Sunday for all food items
          </li>
        </ul>
        <a href="{% url 'login' %}" class="learn-more">Learn more →</a>
      </div>
    </div>
  </div>
</section>

  {% if user.is_authenticated %}
  <div class="container mt-5">
    <h2 class="text-center mb-4 fw-bold">Featured Categories</h2>
    <p class="text-center text-muted mb-5">Discover our most popular food categories</p>
    <div class="row">
      {% for category in featured_categories %}
      <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-effect">
          <div class="position-relative">
            {% if category.image %}
            <img src="{{ category.image.url }}" class="card-img-top" alt="{{ category.name }}" style="height: 200px; object-fit: cover;">
            {% else %}
            <img src="{% static 'images/default-category.jpg' %}" class="card-img-top" alt="No image" style="height: 200px; object-fit: cover;">
            {% endif %}
            <div class="category-badge">{{ category.item_count }} items</div>
          </div>
          <div class="card-body text-center">
            <h5 class="card-title fw-bold">{{ category.name }}</h5>
            <p class="card-text text-muted">{{ category.description|truncatechars:100 }}</p>
            <a href="{% url 'item_list' %}?category={{ category.slug }}" class="btn btn-primary rounded-pill px-4">Explore</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <h2 class="text-center mb-4 mt-5 fw-bold">Popular Items</h2>
    <p class="text-center text-muted mb-5">Customers love these delicious choices</p>
    <div class="row">
      {% for item in popular_items %}
      <div class="col-md-3 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-effect">
          <div class="position-relative">
            {% if item.image %}
            <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}" style="height: 180px; object-fit: cover;">
            {% else %}
            <img src="{% static 'images/default-item.jpg' %}" class="card-img-top" alt="No image" style="height: 180px; object-fit: cover;">
            {% endif %}
            {% if item.discount_price %}
            <div class="discount-badge">Save ${{ item.price|floatformat:2|add:"-"|add:item.discount_price|floatformat:2 }}</div>
            {% endif %}
          </div>
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <h5 class="card-title fw-bold mb-0">{{ item.name }}</h5>
              <div class="rating-badge">
                <i class="fas fa-star"></i> {{ item.average_rating|default:"4.5" }}
              </div>
            </div>
            <p class="card-text text-muted small mb-2">{{ item.description|truncatechars:50 }}</p>
            <div class="d-flex justify-content-between align-items-center mt-3">
              <div>
                {% if item.discount_price %}
                <span class="text-danger fw-bold">${{ item.discount_price }}</span>
                <span class="text-muted text-decoration-line-through ms-2">${{ item.price }}</span>
                {% else %}
                <span class="fw-bold">${{ item.price }}</span>
                {% endif %}
              </div>
              <a href="{% url 'add_to_cart' item.id %}" class="btn btn-sm btn-primary rounded-pill px-3">
                <i class="fas fa-cart-plus"></i> Add
              </a>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</section>




<!-- CONTACT SECTION -->
<section id="contact-section" class="py-5">
  <div class="container py-5">
    <div class="row mb-5">
      <div class="col text-center">
        <h1 class="fw-bold" style="color: #f15a24;">Get in Touch</h1>
        <p class="text-muted">We'd love to hear from you! Whether it's feedback, suggestions, or questions.</p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6">
        <div class="p-4 rounded-4 shadow-sm border border-light" style="background-color: #fff;">
          <div class="mb-4">
            <h5 class="fw-bold text-dark"><i class="fas fa-map-marker-alt me-2 text-danger"></i> Address</h5>
            <p class="text-muted">456 Food Street, Food City, FC 10000</p>
          </div>
          <div class="mb-4">
            <h5 class="fw-bold text-dark"><i class="fas fa-phone me-2 text-danger"></i> Phone</h5>
            <p class="text-muted">+977 9800000000</p>
          </div>
          <div>
            <h5 class="fw-bold text-dark"><i class="fas fa-envelope me-2 text-danger"></i> Email</h5>
            <p class="text-muted">support@foodorder.com</p>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="p-4 rounded-4 shadow-sm border border-light" style="background-color: #fff;">
          <h4 class="mb-4 fw-bold text-dark">Send us a Message</h4>
          <form method="post" novalidate>
            {% csrf_token %}
            {% if success %}
            <div class="alert alert-success">Thank you for contacting us! We will get back to you soon.</div>
            {% endif %}
            <div class="mb-3">
              {{ form.name|attr:"class:form-control rounded-pill px-4 py-2" | attr:"placeholder:Your Name" }}
              {% if form.name.errors %}
              <div class="text-danger small">{{ form.name.errors }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              {{ form.email|attr:"class:form-control rounded-pill px-4 py-2" | attr:"placeholder:Your Email" }}
              {% if form.email.errors %}
              <div class="text-danger small">{{ form.email.errors }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              {{ form.subject|attr:"class:form-control rounded-pill px-4 py-2" | attr:"placeholder:Subject" }}
              {% if form.subject.errors %}
              <div class="text-danger small">{{ form.subject.errors }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              {{ form.message|attr:"class:form-control px-4 py-2 rounded-4" | attr:"placeholder:Your Message" | attr:"rows:5" }}
              {% if form.message.errors %}
              <div class="text-danger small">{{ form.message.errors }}</div>
              {% endif %}
            </div>

            <div class="d-grid">
              <button type="submit" class="btn btn-lg text-white" style="background-color: #f15a24; border-radius: 30px;">
                Send Message
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
.hover-effect {
  transition: all 0.3s ease;
  border-radius: 15px;
  overflow: hidden;
}

.hover-effect:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;
}

.category-badge {
  position: absolute;
  bottom: 10px;
  right: 10px;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 0.8rem;
}

.discount-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background-color: #dc3545;
  color: white;
  padding: 3px 8px;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: bold;
}

.rating-badge {
  background-color: #ffc107;
  color: white;
  padding: 2px 6px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: bold;
}
</style>

{% endblock %}
